# OS编程作业报告

|  姓名  |   学号    |        院系        |       邮箱        |
| :----: | :-------: | :----------------: | :---------------: |
| 张洋彬 | 191220169 | 计算机科学与技术系 | 1016466918@qq.com |
## 一、运行机器的CPU核数

![截屏2021-04-15 上午12.17.10](/Users/mac/Library/Application Support/typora-user-images/截屏2021-04-15 上午12.17.10.png)

​	由上图可见，运行机器的cpu核数为4。

## 二、不同n值的情况下，程序的运行时间开销及计算结果

![截屏2021-04-15 上午12.23.11](/Users/mac/Desktop/截屏2021-04-15 上午12.23.11.png)

![截屏2021-04-15 上午12.24.09](/Users/mac/Desktop/截屏2021-04-15 上午12.24.09.png)

## 三、简要分析

1、从上图可见，real*4>user+sys,且pi值与标准值相差不大，运行结果正确。

2、传统的rand函数不支持线程，多线程利用锁机制保护holdrand，就可以使得多个线程在这个变量上的访问上串行，会导致频繁调用锁机制系统调用，大幅增加系统的开销，所以两个线程运行程序的时间远远超过了一个线程运行程序的时间（rand导致的）。

3、线程太少或太多都会导致结果的偏差较大，为保证结果的准确，应取合适的值。